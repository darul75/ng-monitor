/** 
* @license ng-monitor - v0.0.3
* (c) 2013 Julien VALERY https://github.com/darul75/ng-monitor
* License: MIT 
**/
!function(a){"use strict";a.module("ngMonitor",[]).directive("monitor",["$compile",function(){return{restrict:"A",replace:!0,link:function(b,c,d){function e(){var a=g();i.lineWidth=2;var b=a.factor*s,c=Math.sin(b*Math.PI/t);c=k/2-(c-0)*t,i.fillStyle="rgba("+a.color+", 0.5)",i.fillRect(s,c,5*Math.sin(s*Math.PI/180),5*Math.sin(s*Math.PI/180)),s+=.5,s>h.width&&f(),r(e)}function f(){s=0,i.clearRect(0,0,h.width,h.height),o(10,"#0bb482",50),p(),q()}function g(){var a=n.NORMAL,b=1,c=3;return m&&30>m?(a=n.LOW,b=1,c=1):m&&m>30&&70>m?(a=n.NORMAL,b=2,c=3):m&&(a=n.HIGH,b=3,c=10),{color:a,factor:b,beat:c}}if(d.id){var h=document.getElementById(d.id),i=h.getContext("2d");if(h.getContext){d.w&&d.h&&(h.width=d.w,h.height=d.h);var j=h.width,k=h.height,l=a.isDefined,m=null;b.$on("ng-monitor",function(a,b){l(b)&&l(b.prc)&&(m=b.prc,f())});var n={HIGH:"220,20,60",NORMAL:"11,180,130",LOW:"0,255,255"},o=function(a){i.lineWidth=.5,i.strokeStyle="rgba(11, 180, 130, 0.6)",i.fillStyle="#000",i.fillRect(0,0,h.width,h.height);for(var b=0;b<=h.height;b+=a)i.beginPath(),i.moveTo(0,b),i.lineTo(h.width,b),i.lineWidth=.5,i.closePath(),i.stroke();for(var c=0;c<=h.width;c+=a)i.beginPath(),i.moveTo(c,0),i.lineTo(c,h.height),i.lineWidth=.5,i.closePath(),i.stroke()};o(10,"#0bb482",50);var p=function(){if(m&&"number"==typeof m){var a=m+"%",b=Math.round(k/7);i.font="normal "+b+"px courier",i.fillStyle="rgba("+g().color+", 0.7)",i.fillText(a,j-j/5,k/7)}};p();var q=function(){if(m&&"number"==typeof m){var a=g(),b=Math.round(k/8);i.lineWidth=10;var c=1/(Math.floor(Math.random()*a.beat)+1);console.log(c.toFixed(1)),i.fillStyle="rgba("+a.color+",0.5)";var d=b,e=10;i.moveTo(e,e+d/4),i.quadraticCurveTo(e,e,e+d/4,e),i.quadraticCurveTo(e+d/2,e,e+d/2,e+d/4),i.quadraticCurveTo(e+d/2,e,e+3*d/4,e),i.quadraticCurveTo(e+d,e,e+d,e+d/4),i.quadraticCurveTo(e+d,e+d/2,e+3*d/4,e+3*d/4),i.lineTo(e+d/2,e+d),i.lineTo(e+d/4,e+3*d/4),i.quadraticCurveTo(e,e+d/2,e,e+d/4),i.fill()}};q();var r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,s=0,t=k/4;e()}}}}}])}(angular);