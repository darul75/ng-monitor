/** 
* @license ng-monitor - v0.0.3
* (c) 2013 Julien VALERY https://github.com/darul75/ng-monitor
* License: MIT 
**/
!function(a){"use strict";a.module("ngMonitor",[]).directive("monitor",["$compile",function(){return{restrict:"A",replace:!0,link:function(b,c,d){function e(){var a=g();i.lineWidth=2;var b=a.factor*q,c=Math.sin(b*Math.PI/s);c=k/2-(c-0)*s,i.fillStyle="rgba("+a.color+", 0.5)",i.fillRect(q,c,5*Math.sin(q*Math.PI/180),5*Math.sin(q*Math.PI/180)),q+=.5,q>h.width&&f(),p(e)}function f(){q=0,i.clearRect(0,0,h.width,h.height),n(10,"#0bb482",50),o()}function g(){var a=r.NORMAL,b=1;return m&&30>m?(a=r.LOW,b=1):m&&m>30&&70>m?(a=r.NORMAL,b=2):m&&(a=r.HIGH,b=3),{color:a,factor:b}}if(d.id){var h=document.getElementById(d.id),i=h.getContext("2d");if(h.getContext){d.w&&d.h&&(h.width=d.w,h.height=d.h);var j=h.width,k=h.height,l=a.isDefined,m=null;b.$on("ng-monitor",function(a,b){l(b)&&l(b.prc)&&(m=b.prc,f())});var n=function(a){i.lineWidth=.5,i.strokeStyle="rgba(11, 180, 130, 0.6)",i.fillStyle="#000",i.fillRect(0,0,h.width,h.height);for(var b=0;b<=h.height;b+=a)i.beginPath(),i.moveTo(0,b),i.lineTo(h.width,b),i.lineWidth=.5,i.closePath(),i.stroke();for(var c=0;c<=h.width;c+=a)i.beginPath(),i.moveTo(c,0),i.lineTo(c,h.height),i.lineWidth=.5,i.closePath(),i.stroke()};n(10,"#0bb482",50);var o=function(){if(m&&"number"==typeof m){var a=m+"%",b=Math.round(k/7);i.font="normal "+b+"px courier",i.fillStyle="rgba("+g().color+", 0.7)",i.fillText(a,j-j/5,k/7)}};o();var p=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,q=0,r={HIGH:"220,20,60",NORMAL:"11,180,130",LOW:"0,255,255"},s=k/4;e()}}}}}])}(angular);